{"ast":null,"code":"import { DOCUMENT } from '@angular/common';\nimport { FormControl } from '@angular/forms';\nimport { filter, from, mergeMap, of, Subject } from 'rxjs';\nimport { grades } from './grades';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"angular-svg-icon\";\nimport * as i4 from \"./components/cover-front/cover-front.component\";\nimport * as i5 from \"./components/cover-front-backside/cover-front-backside.component\";\nimport * as i6 from \"./components/introduction/introduction.component\";\nimport * as i7 from \"./pages/register/register.component\";\n\nfunction BookComponent_div_10_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const page_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", page_r2, \" \");\n  }\n}\n\nfunction BookComponent_div_10_ng_template_3_liv_introduction_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"liv-introduction\", 24);\n  }\n\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"book\", ctx_r8.book);\n  }\n}\n\nfunction BookComponent_div_10_ng_template_3_liv_register_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"liv-register\");\n  }\n}\n\nfunction BookComponent_div_10_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, BookComponent_div_10_ng_template_3_liv_introduction_0_Template, 1, 1, \"liv-introduction\", 22);\n    i0.ɵɵtemplate(1, BookComponent_div_10_ng_template_3_liv_register_1_Template, 1, 0, \"liv-register\", 23);\n  }\n\n  if (rf & 2) {\n    const i_r3 = i0.ɵɵnextContext().index;\n    i0.ɵɵproperty(\"ngIf\", i_r3 === 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", i_r3 === 2);\n  }\n}\n\nfunction BookComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16)(1, \"article\", 17);\n    i0.ɵɵtemplate(2, BookComponent_div_10_ng_container_2_Template, 2, 1, \"ng-container\", 18);\n    i0.ɵɵtemplate(3, BookComponent_div_10_ng_template_3_Template, 2, 2, \"ng-template\", null, 19, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"footer\", 20)(6, \"span\", 21);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const i_r3 = ctx.index;\n\n    const _r5 = i0.ɵɵreference(4);\n\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", i_r3 !== 0 && i_r3 !== 2)(\"ngIfElse\", _r5);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate2(\"\", i_r3 + 1, \" / \", ctx_r0.totalPages, \"\");\n  }\n}\n\nconst _c0 = function (a0) {\n  return {\n    \"switch-pages-action-button__next--active\": a0\n  };\n};\n\nfunction BookComponent_button_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function BookComponent_button_18_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.handleNextPage();\n    });\n    i0.ɵɵelement(1, \"svg-icon\", 26);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(1, _c0, ctx_r1.showNextButton));\n  }\n}\n\nconst _c1 = function (a0) {\n  return {\n    \"switch-pages-action-button__previous--active\": a0\n  };\n};\n\nconst _c2 = function (a0) {\n  return {\n    \"book-container__closeBookButton--active\": a0\n  };\n};\n\nexport let BookComponent = /*#__PURE__*/(() => {\n  class BookComponent {\n    constructor(document, renderer, route) {\n      this.document = document;\n      this.renderer = renderer;\n      this.route = route;\n      this.pages = ['Primeira Pagina', 'Segunda Pagina', 'Terceira Pagina', 'Quarta Pagina', 'Quinta Pagina', 'Sexta Pagina', 'Setima Pagina', 'Oitava Pagina'];\n      this.book = grades['1-ano'];\n      this._switchingPage = false;\n      this._destroy$ = new Subject();\n      this.media = new FormControl(null);\n      this.currentPage = 0;\n    }\n\n    get totalPages() {\n      return this.pages.length;\n    }\n\n    get showPreviousButton() {\n      return this.currentPage > 0;\n    }\n\n    get showNextButton() {\n      return this.currentPage >= 0 && this.currentPage <= this.pages.length;\n    }\n\n    get showCloseButton() {\n      return this.currentPage > 0;\n    }\n\n    ngOnInit() {\n      this.route.queryParams.pipe(filter(params => params['grade'] && Object.keys(grades).some(key => key === params['grade']))).subscribe(params => this.book = grades[params['grade']]);\n    }\n\n    ngOnDestroy() {\n      clearTimeout(this._switchingPageTimeout);\n\n      this._destroy$.next(true);\n\n      this._destroy$.complete();\n    }\n\n    ngAfterViewInit() {\n      const pages = Array.from(this.document.getElementsByClassName('page'));\n      this.pagesElement = pages;\n      from(pages).pipe(mergeMap((page, index) => of({\n        page,\n        index\n      }))).subscribe(({\n        page,\n        index\n      }) => {\n        page['pageNum'] = index + 1;\n\n        if (index % 2 === 0) {\n          this.renderer.setStyle(page, 'z-index', pages.length - index);\n        }\n      });\n    }\n\n    handleCloseBook() {\n      if (this.currentPage === 0) return;\n      const flippedPages = this.document.getElementsByClassName('flipped');\n      Array.from(flippedPages).forEach(page => page.classList.remove('flipped'));\n      const frontCover = this.document.getElementById('main-front-cover');\n      frontCover.classList.remove('main-cover--active');\n      this.currentPage = 0;\n    }\n\n    handlePreviousPage() {\n      if (this._switchingPage || this.currentPage === 0) return;\n      this._switchingPage = true;\n      const flippedPages = this.pagesElement.filter(page => page.classList.contains('flipped'));\n      const lastFlippedPageIndex = flippedPages.length - 1;\n      const lastFlippedPage = flippedPages[lastFlippedPageIndex];\n      const lastFlippedPageNum = lastFlippedPage['pageNum'];\n      const previousPageToFlip = this.pagesElement.find(page => page['pageNum'] === lastFlippedPageNum);\n      previousPageToFlip.classList.remove('flipped');\n      previousPageToFlip.previousElementSibling.classList.remove('flipped');\n\n      if (lastFlippedPageNum - 2 === 0) {\n        const frontCover = this.document.getElementById('main-front-cover');\n\n        if (frontCover.classList.contains('main-cover--active')) {\n          frontCover.classList.remove('main-cover--active');\n        }\n      }\n\n      this.currentPage = lastFlippedPageNum - 2;\n      this._switchingPageTimeout = setTimeout(() => this._switchingPage = false, 450);\n    }\n\n    handleNextPage() {\n      if (this._switchingPage || this.pagesElement[this.currentPage + 1].classList.contains('cover-back')) return;\n      this._switchingPage = true;\n      let nextPageToFlip = this.pagesElement[0];\n      const flippedPages = this.pagesElement.filter(page => page.classList.contains('flipped'));\n\n      if (flippedPages.length > 0) {\n        const lastFlippedPageIndex = flippedPages.length - 1;\n        const lastFlippedPage = flippedPages[lastFlippedPageIndex];\n        const lastFlippedPageNum = lastFlippedPage['pageNum'];\n        nextPageToFlip = this.pagesElement.find(page => page['pageNum'] === lastFlippedPageNum + 1);\n      }\n\n      nextPageToFlip.classList.add('flipped');\n      nextPageToFlip.nextElementSibling.classList.add('flipped');\n\n      if (nextPageToFlip['pageNum'] === 1) {\n        const frontCover = this.document.getElementById('main-front-cover');\n        frontCover.classList.add('main-cover--active');\n      }\n\n      this.currentPage = nextPageToFlip['pageNum'];\n      this._switchingPageTimeout = setTimeout(() => this._switchingPage = false, 450);\n    }\n\n  }\n\n  BookComponent.ɵfac = function BookComponent_Factory(t) {\n    return new (t || BookComponent)(i0.ɵɵdirectiveInject(DOCUMENT), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i1.ActivatedRoute));\n  };\n\n  BookComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: BookComponent,\n    selectors: [[\"liv-book\"]],\n    decls: 19,\n    vars: 13,\n    consts: [[1, \"book-container\"], [1, \"switch-pages-action-button\", \"switch-pages-action-button__previous\", 3, \"ngClass\", \"click\"], [\"src\", \"assets/icons/arrow-left.svg\"], [1, \"book\"], [\"id\", \"main-front-cover\", 1, \"main-cover\"], [\"id\", \"pages\", 1, \"pages\"], [1, \"page\", \"cover-front\"], [3, \"book\", \"seePortfolio\"], [1, \"page\", \"cover-front\", \"cover-front--backside\"], [\"class\", \"page\", 4, \"ngFor\", \"ngForOf\"], [1, \"page\", \"cover-back\"], [\"id\", \"main-back-cover\", 1, \"main-cover\"], [1, \"book-action-right-buttons\"], [1, \"book-container__closeBookButton\", 3, \"ngClass\", \"click\"], [\"src\", \"assets/icons/close.svg\"], [\"class\", \"switch-pages-action-button\", 3, \"ngClass\", \"click\", 4, \"ngIf\"], [1, \"page\"], [1, \"page__content\"], [4, \"ngIf\", \"ngIfElse\"], [\"customPages\", \"\"], [1, \"page__footer\"], [1, \"page__footer__pageNum\"], [3, \"book\", 4, \"ngIf\"], [4, \"ngIf\"], [3, \"book\"], [1, \"switch-pages-action-button\", 3, \"ngClass\", \"click\"], [\"src\", \"assets/icons/arrow-right.svg\"]],\n    template: function BookComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"button\", 1);\n        i0.ɵɵlistener(\"click\", function BookComponent_Template_button_click_1_listener() {\n          return ctx.handlePreviousPage();\n        });\n        i0.ɵɵelement(2, \"svg-icon\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelement(4, \"div\", 4);\n        i0.ɵɵelementStart(5, \"div\", 5)(6, \"div\", 6)(7, \"liv-cover-front\", 7);\n        i0.ɵɵlistener(\"seePortfolio\", function BookComponent_Template_liv_cover_front_seePortfolio_7_listener() {\n          return ctx.handleNextPage();\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(8, \"div\", 8);\n        i0.ɵɵelement(9, \"liv-cover-front-backside\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(10, BookComponent_div_10_Template, 8, 4, \"div\", 9);\n        i0.ɵɵelementStart(11, \"div\", 10)(12, \"h1\");\n        i0.ɵɵtext(13, \"Fim!\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(14, \"div\", 11);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(15, \"aside\", 12)(16, \"button\", 13);\n        i0.ɵɵlistener(\"click\", function BookComponent_Template_button_click_16_listener() {\n          return ctx.handleCloseBook();\n        });\n        i0.ɵɵelement(17, \"svg-icon\", 14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(18, BookComponent_button_18_Template, 2, 3, \"button\", 15);\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(9, _c1, ctx.showPreviousButton));\n        i0.ɵɵadvance(2);\n        i0.ɵɵstyleProp(\"--brandColor\", ctx.book.colors.brand)(\"--brandLightColor\", ctx.book.colors.brandLight);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"book\", ctx.book);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.pages);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(11, _c2, ctx.showCloseButton));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.showNextButton);\n      }\n    },\n    directives: [i2.NgClass, i3.SvgIconComponent, i4.CoverFrontComponent, i5.CoverFrontBacksideComponent, i2.NgForOf, i2.NgIf, i6.IntroductionComponent, i7.RegisterComponent],\n    styles: [\".switch-pages-action-button,.book-container__closeBookButton{background-color:#f8f9fd;border-radius:9999px;box-shadow:0 4px 4px #00000040;width:3rem;height:3rem;padding:.5rem;line-height:0;display:flex;align-items:center;justify-content:center;transition:.2s ease}.switch-pages-action-button:hover,.book-container__closeBookButton:hover{background-color:#e0e2e9;box-shadow:0 2px 2px #00000040}.book-container{min-height:100%;display:flex;justify-content:center;align-items:center;gap:3rem;padding:2em 0}.book-container__closeBookButton{position:relative;top:1.25rem;opacity:0;pointer-events:none}.book-container__closeBookButton--active{opacity:1;pointer-events:auto}.book{transition:opacity .4s .2s;perspective:250vw}.page{display:flex;flex-direction:column;position:relative;width:441px;height:704px}.page:not(.cover-front){padding:1.5em}.page__content{flex:1;display:flex;flex-direction:column}.page__footer{display:flex;justify-content:space-between;align-items:center}.page__footer__pageNum{display:flex;align-items:center;justify-content:center;padding:.25rem .75rem;background:rgba(255,255,255,.61);font-family:Roboto,sans-serif;font-weight:600;font-style:normal;font-size:.75rem;line-height:1.2;color:#2d2a34;border:1px solid #60636e;border-radius:30px;width:-moz-fit-content;width:fit-content}@media (min-width: 768px){.page__footer__pageNum{font-size:.75rem}}.page:nth-child(even){clear:both}.book .pages{width:844px;height:720px;position:relative;transform-style:preserve-3d;-webkit-backface-visibility:hidden;backface-visibility:hidden}.book .page{clear:none;margin:0;position:absolute;top:8px;width:414px;height:704px;transform-origin:0 0;transition:transform 1.4s;-webkit-backface-visibility:hidden;backface-visibility:hidden;transform-style:preserve-3d;-webkit-user-select:none;user-select:none;background-color:#f0f0f0}.book .page:not(.page.cover-front,.page.cover-back):before{content:\\\"\\\";position:absolute;inset:0;background:rgba(0,0,0,0);transition:background .7s;z-index:2;pointer-events:none}.book .page:nth-child(odd){pointer-events:all;transform:rotateY(0);right:8px;border-radius:0 24px 24px 0;background-image:linear-gradient(to right,rgba(0,0,0,.15) 0%,rgba(0,0,0,0) 10%)}.book .page:nth-child(odd):hover{transform:rotateY(-15deg)}.book .page:nth-child(odd):hover:before{background:rgba(0,0,0,.03)}.book .page:nth-child(odd):before{background:rgba(0,0,0,0)}.book .page:nth-child(even){pointer-events:none;transform:rotateY(180deg);transform-origin:100% 0;left:8px;border-radius:24px 0 0 24px;border-color:#000;background-image:linear-gradient(to left,rgba(0,0,0,.12) 0%,rgba(0,0,0,0) 10%)}.book .page:nth-child(even):before{background:rgba(0,0,0,.2)}.book .page.flipped:nth-child(odd){pointer-events:none;transform:rotateY(-180deg)}.book .page.flipped:nth-child(odd):before{background:rgba(0,0,0,.2)}.book .page.flipped:nth-child(even){pointer-events:all;transform:rotateY(0)}.book .page.flipped:nth-child(even):hover{transform:rotateY(15deg)}.book .page.flipped:nth-child(even):hover:before{background:rgba(0,0,0,.03)}.book .page.flipped:nth-child(even):before{background:rgba(0,0,0,0)}.page:nth-child(odd){background-position:right top}.cover-front,.cover-back{display:flex;flex-direction:column;background:var(--brandColor)!important}.main-cover{clear:none;margin:0;position:absolute;width:426px;height:720px;top:0;background:#526070;z-index:-1;transform-origin:0 0;transition:transform 1.4s;-webkit-backface-visibility:hidden;backface-visibility:hidden;transform-style:preserve-3d;-webkit-user-select:none;user-select:none;pointer-events:none}.main-cover:first-child{transform:rotateY(-180deg);transform-origin:right;border-radius:32px 0 0 32px;background-image:linear-gradient(to right,rgba(0,0,0,.15) 0%,rgba(0,0,0,0) 10%)}.main-cover:last-child{right:-4px;border-radius:0 32px 32px 0}.main-cover--active:first-child{transform:rotateY(0);transition:transform 1.4s .2s}.cover-front{display:flex;flex-direction:column;overflow:hidden}.cover-front--backside{background:var(--brandLightColor)!important;padding:1.5rem}.book-action-right-buttons{display:grid;grid-template-rows:repeat(2,360px)}.switch-pages-action-button__previous,.switch-pages-action-button__next{opacity:0;pointer-events:none}.switch-pages-action-button__previous--active,.switch-pages-action-button__next--active{opacity:1;pointer-events:auto}\\n\"],\n    encapsulation: 2\n  });\n  return BookComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}